OK, clair üëç

Tu veux d√©sactiver / ignorer SSL quand Spark t√©l√©charge des d√©pendances (repo Maven) via spark.jars.packages, typiquement sur CentOS / proxy / cert cass√©.


üëâ Voil√† LES configs qui marchent vraiment.



‚úÖ Solution 1 ‚Äî Ignorer SSL pour Ivy / Maven (RECOMMAND√âE)


Spark utilise Ivy pour t√©l√©charger les jars.

Il faut passer des options JVM au driver et aux executors.


üîß PySpark / SparkSession


spark = (
    SparkSession.builder
    .appName("test-ssl")
    .config(
        "spark.jars.packages",
        "org.apache.hadoop:hadoop-azure:3.3.6,"
        "com.azure:azure-storage-blob:12.25.1"
    )
    .config(
        "spark.driver.extraJavaOptions",
        "-Divy.ssl.ignore=true "
        "-Divy.http.ssl.disable=true "
        "-Dcom.sun.net.ssl.checkRevocation=false"
    )
    .config(
        "spark.executor.extraJavaOptions",
        "-Divy.ssl.ignore=true "
        "-Divy.http.ssl.disable=true "
        "-Dcom.sun.net.ssl.checkRevocation=false"
    )
    .getOrCreate()
)



‚úÖ √áa bypass :




validation SSL


certificats manquants


PKIX path building failed





‚úÖ Solution 2 ‚Äî Forcer HTTP (quand HTTPS bloque)


.config("spark.jars.repositories", "http://repo1.maven.org/maven2")



‚ö†Ô∏è Maven Central redirige vers HTTPS, donc pas toujours fiable, mais utile en proxy mal configur√©.



‚úÖ Solution 3 ‚Äî Ignorer SSL globalement (mode bourrin)


‚ö†Ô∏è √Ä utiliser uniquement en debug


.config(
  "spark.driver.extraJavaOptions",
  "-Djavax.net.ssl.trustStoreType=JKS "
  "-Djavax.net.ssl.trustStore=/dev/null "
  "-Djavax.net.ssl.trustStorePassword=changeit"
)




‚ùå Ce qui NE MARCHE PAS




PYTHONHTTPSVERIFY=0 ‚ùå (inutile pour



