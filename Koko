Merci pour les nouvelles photos üëå
L√† on voit clairement le probl√®me :

Caused by: java.lang.ClassCastException:
The chosen LogFactory implementation does not extend LogFactory.
at org.apache.commons.logging.LogFactory.newFactory
...
Caused by: java.lang.UnsupportedOperationException:
Operation not supported in jcl-over-slf4j. 
See also http://www.slf4j.org/codes.html#unsupported_jcl


---

üîé Ce qui se passe

Tu as un conflit entre plusieurs impl√©mentations de logging :

commons-logging (Apache Commons Logging, utilis√© par Spring, etc.)

jcl-over-slf4j (bridge qui redirige Commons Logging vers SLF4J)

slf4j-api + slf4j-log4j ou log4j-to-slf4j (selon ton setup Spark)


‚ö†Ô∏è Mais dans ton fat jar, Maven Shade a embarqu√© √† la fois commons-logging et jcl-over-slf4j.
Du coup, quand Spring essaye d‚Äôutiliser Commons Logging ‚Üí il tombe sur la version bridg√©e qui ne supporte pas certaines op√©rations, et tu as ce UnsupportedOperationException.


---

üõ† Solution

üëâ Tu dois exclure commons-logging des d√©pendances, et garder uniquement jcl-over-slf4j.

Dans ton pom.xml (module1 par ex.)

Ajoute :

<dependencyManagement>
  <dependencies>
    <!-- Forcer Commons Logging √† passer par SLF4J -->
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>99-empty</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>
</dependencyManagement>

Et dans tes vraies deps (Spring, etc.), tu exclus Commons Logging :

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>5.3.30</version>
  <exclusions>
    <exclusion>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
    </exclusion>
  </exclusions>
</dependency>

Puis tu ajoutes le pont :

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>2.0.13</version>
</dependency>

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>2.0.13</version>
</dependency>

<!-- backend de log : log4j2 ou logback -->
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.4.14</version>
</dependency>


---

‚úÖ R√©sultat attendu

Plus de ClassCastException ‚Üí tout Commons Logging est redirig√© proprement vers SLF4J.

Ton fat jar contient seulement :

jcl-over-slf4j

slf4j-api

ton backend (logback-classic ou log4j2)




---

üëâ Veux-tu que je t‚Äô√©crive la config compl√®te dependencyManagement + exclusions pour Spark + Spring (les plus courants), histoire que tu copies-colles et relances direct ?

