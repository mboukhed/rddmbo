Oui, Ã§a câ€™est le piÃ¨ge classique avec Active Choices :
si tu mets directement un choice ou booleanParam, Jenkins les affiche tout le temps.
Pour que le menu apparaisse/disparaisse selon ton bouton radio, il faut que ces paramÃ¨tres aussi soient dÃ©finis comme des CascadeChoiceParameter (ou DynamicReferenceParameter).

En clair :

choice(...) â†’ doit Ãªtre encapsulÃ© dans un CascadeChoiceParameter avec if (MODE == "CI") â€¦ else [].

Idem pour tes booleanParam(...) â†’ convertis en CascadeChoiceParameter avec PT_CHECKBOX.
Sinon Jenkins les affiche par dÃ©faut mÃªme quand MODE nâ€™est pas sÃ©lectionnÃ©.



---

Exemple corrigÃ© de ton menu CI

properties([
  parameters([
    // Bouton radio principal
    [$class: 'ChoiceParameter',
     name: 'MODE',
     description: 'Choisir CI ou CD',
     choiceType: 'PT_RADIO',
     script: [$class: 'GroovyScript',
              script: [sandbox:true, script:'return ["CI","CD"]'],
              defaultGroovyScript:[sandbox:true, script:'return "CI"']] ],

    // --- project_name ---
    [$class: 'CascadeChoiceParameter',
     name: 'project_name',
     description: 'Set the project you want to build',
     choiceType: 'PT_SINGLE_SELECT',
     referencedParameters: 'MODE',
     script: [$class:'GroovyScript',
              script:[sandbox:true, script:'''
                if (MODE == "CI") { return ["equity","marketshare"] }
                return []
              '''],
              defaultGroovyScript:[sandbox:true, script:'return "equity"']] ],

    // --- deploy_location ---
    [$class: 'CascadeChoiceParameter',
     name: 'deploy_location',
     description: 'Set the location (if needed for CI)',
     choiceType: 'PT_SINGLE_SELECT',
     referencedParameters: 'MODE',
     script: [$class:'GroovyScript',
              script:[sandbox:true, script:'''
                if (MODE == "CI") { return ["personal","azure"] }
                return []
              '''],
              defaultGroovyScript:[sandbox:true, script:'return "personal"']] ],

    // --- booleans transformÃ©s en checkboxes ---
    [$class: 'CascadeChoiceParameter',
     name: 'ci_flags',
     description: 'Options CI',
     choiceType: 'PT_CHECKBOX',
     referencedParameters: 'MODE',
     script: [$class:'GroovyScript',
              script:[sandbox:true, script:'''
                if (MODE == "CI") {
                  return ["store_in_jfrog","release_version","skip_tests","skip_quality"]
                }
                return []
              '''],
              defaultGroovyScript:[sandbox:true, script:'return "skip_tests"']] ]
  ])
])


---

RÃ©sultat dans lâ€™UI

Tu vois dâ€™abord ton bouton radio CI/CD.

Par dÃ©faut il coche CI, mais les menus CI ne sâ€™affichent que si CI est cochÃ©.

Si tu passes Ã  CD â†’ tout disparaÃ®t (et tu pourras mettre ton menu CD en miroir).



---

ðŸ‘‰ Veux-tu que je te prÃ©pare le bloc CD complet aussi (project_name, deploy_location, deploy_in_azure) avec la mÃªme logique, comme Ã§a tu nâ€™auras plus quâ€™Ã  copier/coller ?

